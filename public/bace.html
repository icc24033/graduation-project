<!DOCTYPE html>
<html lang="ja">
<head>
    <title>生徒アカウント作成編集</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
</head>
<body>
    <div class="app-container">
        <header class="app-header">
            <h1>生徒アカウント作成編集</h1>
            <span class="material-symbols-outlined user-icon">person</span>
        </header>

        <main class="main-content">
            <nav class="sidebar">
                <ul>
                    <li class="nav-item has-dropdown">
                        <button class="dropdown-toggle" id="yearDropdownToggle" aria-expanded="false">
                            年度
                            <span class="current-value">2025</span>
                        </button>
                        <ul class="dropdown-menu" id="yearDropdownMenu">
                            <li><a href="#" data-year="2025">2025年度</a></li>
                            <li><a href="#" data-year="2024">2024年度</a></li>
                            <li><a href="#" data-year="2023">2023年度</a></li>
                            <li><a href="#" data-year="2022">2022年度</a></li>
                        </ul>
                    </li>
                    <li class="nav-item has-dropdown">
                        <button class="dropdown-toggle" id="yearDropdownToggle" aria-expanded="false">
                            コース
                            <span class="current-value">システムデザインコース</span>
                        </button>
                        <ul class="dropdown-menu" id="yearDropdownMenu">
                            <li><a href="#" data-year="2025">システムデザインコース</a></li>
                            <li><a href="#" data-year="2024">Webクリエイタコース</a></li>
                            <li><a href="#" data-year="2023">マルチメディアOAコース</a></li>
                            <li><a href="#" data-year="2022">応用情報コース</a></li>
                            <li><a href="#" data-year="2025">基本情報コース</a></li>
                            <li><a href="#" data-year="2024">ITパスポートコース</a></li>
                            <li><a href="#" data-year="2023">1年1組</a></li>
                            <li><a href="#" data-year="2022">1年2組</a></li>
                        </ul>
                    </li>
                    <li class="nav-item is-group-label">編集</li>
                    <li class="nav-item"><a href="#">アカウントの追加</a></li>
                    <li class="nav-item"><a href="#">アカウントの削除</a></li>
                    <li class="nav-item"><a href="#">学年の移動</a></li>
                    <li class="nav-item"><a href="#">コースの編集</a></li>
                </ul>
                <button class="download-button">
                    <span class="material-symbols-outlined">download</span>
                    名簿ダウンロード
                </button>
            </nav>

            <div class="content-area">
                <div class="account-table-container">
                    <div class="table-header">
                        <div class="column-check"></div>
                        <div class="column-student-id">学生番号</div>
                        <div class="column-name">氏名</div>
                        <div class="column-course">コース</div>
                    </div>
                    <div class="table-row">
                        <div class="column-check"><input type="checkbox"></div>
                        <div class="column-student-id"><input type="text" value="学生番号"></div>
                        <div class="column-name"><input type="text" value="氏名"></div>
                        <div class="column-course"><input type="text" value="コース"></div>
                    </div>
                    <div class="table-row">
                        <div class="column-check"><input type="checkbox"></div>
                        <div class="column-student-id"><input type="text" value="学生番号"></div>
                        <div class="column-name"><input type="text" value="氏名"></div>
                        <div class="column-course"><input type="text" value="コース"></div>
                    </div>
                    <div class="table-row">
                        <div class="column-check"><input type="checkbox"></div>
                        <div class="column-student-id"><input type="text" value="学生番号"></div>
                        <div class="column-name"><input type="text" value="氏名"></div>
                        <div class="column-course"><input type="text" value="コース"></div>
                    </div>
                    <div class="table-row">
                        <div class="column-check"><input type="checkbox"></div>
                        <div class="column-student-id"><input type="text" value="学生番号"></div>
                        <div class="column-name"><input type="text" value="氏名"></div>
                        <div class="column-course"><input type="text" value="コース"></div>
                    </div>
                    <div class="table-row">
                        <div class="column-check"><input type="checkbox"></div>
                        <div class="column-student-id"><input type="text" value="学生番号"></div>
                        <div class="column-name"><input type="text" value="氏名"></div>
                        <div class="column-course"><input type="text" value="コース"></div>
                    </div>
                    <div class="table-row">
                        <div class="column-check"><input type="checkbox"></div>
                        <div class="column-student-id"><input type="text" value="学生番号"></div>
                        <div class="column-name"><input type="text" value="氏名"></div>
                        <div class="column-course"><input type="text" value="コース"></div>
                    </div>
                    <div class="table-row">
                        <div class="column-check"><input type="checkbox"></div>
                        <div class="column-student-id"><input type="text" value="学生番号"></div>
                        <div class="column-name"><input type="text" value="氏名"></div>
                        <div class="column-course"><input type="text" value="コース"></div>
                    </div>
                    <div class="table-row">
                        <div class="column-check"><input type="checkbox"></div>
                        <div class="column-student-id"><input type="text" value="学生番号"></div>
                        <div class="column-name"><input type="text" value="氏名"></div>
                        <div class="column-course"><input type="text" value="コース"></div>
                    </div>
                    <div class="table-row">
                        <div class="column-check"><input type="checkbox"></div>
                        <div class="column-student-id"><input type="text" value="学生番号"></div>
                        <div class="column-name"><input type="text" value="氏名"></div>
                        <div class="column-course"><input type="text" value="コース"></div>
                    </div>
                </div>
                
                <button class="add-button">追加</button>
            </div>
        </main>
    </div>

    <script>
        // ドロップダウンメニューの開閉を制御するJavaScript
        document.addEventListener('DOMContentLoaded', () => {
            const dropdownToggles = document.querySelectorAll('.dropdown-toggle');

            dropdownToggles.forEach(toggle => {
                toggle.addEventListener('click', (event) => {
                    // 親の.nav-item要素を取得
                    const navItem = toggle.closest('.nav-item');
                    // メニュー本体を取得
                    const menu = navItem.querySelector('.dropdown-menu');
                    
                    if (menu) {
                        // メニューが表示されているか確認
                        const isExpanded = toggle.getAttribute('aria-expanded') === 'true' || false;

                        // 全ての開いているメニューを閉じる
                        document.querySelectorAll('.dropdown-toggle[aria-expanded="true"]').forEach(openToggle => {
                            if (openToggle !== toggle) {
                                openToggle.setAttribute('aria-expanded', 'false');
                                openToggle.closest('.nav-item').querySelector('.dropdown-menu').classList.remove('is-open');
                            }
                        });

                        // 現在のメニューを開閉する
                        toggle.setAttribute('aria-expanded', String(!isExpanded));
                        menu.classList.toggle('is-open', !isExpanded);

                        // 年度のドロップダウンのメニュー項目にイベントリスナーを追加
                        if (navItem.id === 'yearDropdownToggle') {
                            const yearLinks = menu.querySelectorAll('a');
                            yearLinks.forEach(link => {
                                link.addEventListener('click', (e) => {
                                    e.preventDefault();
                                    const selectedYear = e.target.getAttribute('data-year');
                                    const currentValueSpan = navItem.querySelector('.current-value');
                                    
                                    // 表示値を更新
                                    if (currentValueSpan) {
                                        currentValueSpan.textContent = selectedYear;
                                    }
                                    
                                    // メニューを閉じる
                                    toggle.setAttribute('aria-expanded', 'false');
                                    menu.classList.remove('is-open');
                                }, { once: true }); // 1回クリックしたらイベントリスナーを削除
                            });
                        }
                    }
                });
            });

            // どこかをクリックしたらメニューを閉じる
            document.addEventListener('click', (event) => {
                if (!event.target.closest('.has-dropdown')) {
                    document.querySelectorAll('.dropdown-toggle[aria-expanded="true"]').forEach(openToggle => {
                        openToggle.setAttribute('aria-expanded', 'false');
                        const menu = openToggle.closest('.nav-item').querySelector('.dropdown-menu');
                        if (menu) {
                             menu.classList.remove('is-open');
                        }
                    });
                }
            });
        });
    </script>
</body>
</html>