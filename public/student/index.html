<!DOCTYPE html>
<html lang="ja">
<head>
    <title>ホーム画面</title>
    <meta charset="utf-8">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="roboots" content="nofollow,noindex">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/style.css"> 
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Noto+Sans+JP:wght@100..900&display=swap"
        rel="stylesheet">
</head>
<body>
    <header class="page-header">
        <p>ICCスマートキャンパス</p>
        <div class="user-icon">
            <div class="i_head"></div>
            <div class="i_body"></div>
        </div>
    </header>

    <main class="main-content">
        <div class="schedule-header">
            <div class="timetable-info">
                <img class="i-timetable" src="images/timetable.svg" alt="時間割アイコン">
                <p class="timetable-text">時間割</p>
            </div>
            <p class="date">11/27 (木)</p>
        </div>

        <div class="schedule-list">
            
            <section class="card">
                <div class="info">
                    <div class="subject-details">
                        <h2 class="subject">C#</h2>
                        <p class="subject-teacher">松野</p> <!--下村-->
                        <p class="room-name">プ実１２</p>
                    </div>
                    <div class="period-details">
                        <p class="period-time">１限（9:10 ~ 10:40）</p>
                        <div class="button-container">
                            
                            <div class="dropdown-wrapper detail-dropdown-wrapper">
                                <button class="button dropdown-toggle detail-toggle" id="detail-toggle-button-1" aria-expanded="false">
                                    授業詳細
                                    <img class="button-icon detail-icon" src="images/arrow_right.svg" alt="矢印アイコン">
                                </button>
                                <div class="dropdown-content detail-content" id="detail-content-1" aria-labelledby="detail-toggle-button-1">
                                    <div class="detail-box">
                                        <div class="detail-title">課題</div>
                                        <p class="detail-text">課題はありません。</p>
                                    </div>
                                    <div class="detail-box">
                                        <div class="detail-title">授業詳細</div>
                                        <p class="detail-text">今日の授業内容 :<br>モグラたたきを作ります。<br>教科書 : P309～</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="dropdown-wrapper item-dropdown-wrapper">
                                <button class="button dropdown-toggle item-toggle" id="item-toggle-button-1" aria-expanded="false">
                                    持ってくるもの
                                    <img class="button-icon item-icon" src="images/arrow_right.svg" alt="矢印アイコン"> 
                                </button>
                                <div class="dropdown-content item-content" id="item-content-1" aria-labelledby="item-toggle-button-1">
                                    <ul class="item-list">
                                        <li><input type="checkbox" id="csharp-textbook-1"><label for="csharp-textbook-1">C#教科書</label></li>
                                        <li><input type="checkbox" id="writing-tools-1"><label for="writing-tools-1">筆記用具</label></li>
                                        <li><input type="checkbox" id="item-c-1"><label for="item-c-1">USBメモリ</label></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="card">
                <div class="info">
                    <div class="subject-details">
                        <h2 class="subject">選択<br>科目</h2>
                        <p class="subject-teacher">小田原</p> <!--下村-->
                        <p class="room-name">マルチ2, 3, シス2</p>
                    </div>
                    <div class="period-details">
                        <p class="period-time">２限（10:50 ~ 12:20）</p>
                        <div class="button-container">
                            
                            <div class="dropdown-wrapper detail-dropdown-wrapper">
                                <button class="button dropdown-toggle detail-toggle" id="detail-toggle-button-2" aria-expanded="false">
                                    授業詳細
                                    <img class="button-icon detail-icon" src="images/arrow_right.svg" alt="矢印アイコン">
                                </button>
                                <div class="dropdown-content detail-content" id="detail-content-2" aria-labelledby="detail-toggle-button-2">
                                    <div class="detail-box">
                                        <div class="detail-title">課題</div>
                                        <p class="detail-text">課題はなし。</p>
                                    </div>
                                    <div class="detail-box">
                                        <div class="detail-title">授業詳細</div>
                                        <p class="detail-text">今日のテーマ：Webデザインの基本</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="dropdown-wrapper item-dropdown-wrapper">
                                <button class="button dropdown-toggle item-toggle" id="item-toggle-button-2" aria-expanded="false">
                                    持ってくるもの
                                    <img class="button-icon item-icon" src="images/arrow_right.svg" alt="矢印アイコン"> 
                                </button>
                                <div class="dropdown-content item-content" id="item-content-2" aria-labelledby="item-toggle-button-2">
                                    <ul class="item-list">
                                        <li><input type="checkbox" id="option-textbook-2"><label for="option-textbook-2">選択科目ノート</label></li>
                                        <li><input type="checkbox" id="option-pen-2"><label for="option-pen-2">赤ペン</label></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="card">
                <div class="info">
                    <div class="subject-details">
                        <h2 class="subject">卒業<br>研究</h2>
                        <p class="subject-teacher">森嵜</p> <!--下村-->
                        <p class="room-name">マルチ2</p>
                    </div>
                    <div class="period-details">
                        <p class="period-time">３限（13:10 ~ 14:40）</p>
                        <div class="button-container">
                            
                            <div class="dropdown-wrapper detail-dropdown-wrapper">
                                <button class="button dropdown-toggle detail-toggle" id="detail-toggle-button-3" aria-expanded="false">
                                    授業詳細
                                    <img class="button-icon detail-icon" src="images/arrow_right.svg" alt="矢印アイコン">
                                </button>
                                <div class="dropdown-content detail-content" id="detail-content-3" aria-labelledby="detail-toggle-button-3">
                                    <div class="detail-box">
                                        <div class="detail-title">課題</div>
                                        <p class="detail-text">次のミーティングまでに進捗報告書作成</p>
                                    </div>
                                    <div class="detail-box">
                                        <div class="detail-title">授業詳細</div>
                                        <p class="detail-text">中間発表の準備と指導</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="dropdown-wrapper item-dropdown-wrapper">
                                <button class="button dropdown-toggle item-toggle" id="item-toggle-button-3" aria-expanded="false">
                                    持ってくるもの
                                    <img class="button-icon item-icon" src="images/arrow_right.svg" alt="矢印アイコン"> 
                                </button>
                                <div class="dropdown-content item-content" id="item-content-3" aria-labelledby="item-toggle-button-3">
                                    <ul class="item-list">
                                        <li><input type="checkbox" id="grad-research-data-3"><label for="grad-research-data-3">研究データ</label></li>
                                        <li><input type="checkbox" id="grad-research-notes-3"><label for="grad-research-notes-3">進捗メモ</label></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="card">
                <div class="info">
                    <div class="subject-details">
                        <h2 class="subject">卒業<br>研究</h2>
                        <p class="subject-teacher">内田</p> <!--下村-->
                        <p class="room-name">マルチ2</p>
                    </div>
                    <div class="period-details">
                        <p class="period-time">４限（14:50 ~ 16:20）</p>
                        <div class="button-container">
                            
                            <div class="dropdown-wrapper detail-dropdown-wrapper">
                                <button class="button dropdown-toggle detail-toggle" id="detail-toggle-button-4" aria-expanded="false">
                                    授業詳細
                                    <img class="button-icon detail-icon" src="images/arrow_right.svg" alt="矢印アイコン">
                                </button>
                                <div class="dropdown-content detail-content" id="detail-content-4" aria-labelledby="detail-toggle-button-4">
                                    <div class="detail-box">
                                        <div class="detail-title">課題</div>
                                        <p class="detail-text">特になし</p>
                                    </div>
                                    <div class="detail-box">
                                        <div class="detail-title">授業詳細</div>
                                        <p class="detail-text">グループディスカッション</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="dropdown-wrapper item-dropdown-wrapper">
                                <button class="button dropdown-toggle item-toggle" id="item-toggle-button-4" aria-expanded="false">
                                    持ってくるもの
                                    <img class="button-icon item-icon" src="images/arrow_right.svg" alt="矢印アイコン"> 
                                </button>
                                <div class="dropdown-content item-content" id="item-content-4" aria-labelledby="item-toggle-button-4">
                                    <ul class="item-list">
                                        <li><input type="checkbox" id="grad-research-laptop-4"><label for="grad-research-laptop-4">ノートPC</label></li>
                                        <li><input type="checkbox" id="grad-research-charger-4"><label for="grad-research-charger-4">充電器</label></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="page-footer">
        <ul class="f-list">
            <li>
                <a href="#" class="current-page" aria-label="ホーム">
                    <img class="f-icon" src="images/home.svg" alt="ホーム">
                </a>
            </li>
            <li>
                <a href="http://localhost/2025/sotsuken/graduation-project/public/student/sitei.php" aria-label="時間割へ">
                    <img class="f-icon" src="images/jikanwari_7.svg" alt="時間割">
                </a>
            </li>
        </ul>
    </footer>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 全てのドロップダウンボタンを取得
            const toggleButtons = document.querySelectorAll('.dropdown-toggle');

            // 開閉処理を担うメイン関数
            function toggleDropdown(button) {
                const wrapper = button.closest('.dropdown-wrapper');
                const isDetailButton = button.classList.contains('detail-toggle');
                
                // IDから時限番号とコンテンツ要素を特定
                const idParts = button.id.split('-');
                const idNumber = idParts.pop();
                const contentPrefix = isDetailButton ? 'detail-content' : 'item-content';
                const contentElement = document.getElementById(`${contentPrefix}-${idNumber}`);
                
                // アイコン要素を取得
                const icon = button.querySelector('.button-icon');

                if (!contentElement || !wrapper) return;

                const isExpanded = button.getAttribute('aria-expanded') === 'true';

                // 排他処理: 同じ時限内のもう一方のドロップダウンを強制的に閉じる
                const card = button.closest('.card');
                const otherWrapperSelector = isDetailButton ? '.item-dropdown-wrapper' : '.detail-dropdown-wrapper';
                const otherWrapper = card.querySelector(otherWrapperSelector);

                if (otherWrapper && otherWrapper.classList.contains('active')) {
                    // 他方を閉じる
                    closeDropdown(otherWrapper);
                }

                if (isExpanded) {
                    // 展開されている場合 -> 閉じる
                    closeDropdown(wrapper);
                } else {
                    // 閉じている場合 -> 展開する
                    wrapper.classList.add('active'); 
                    button.setAttribute('aria-expanded', 'true');
                    contentElement.classList.add('show');

                    // アイコンをドロップダウンアイコンに変更
                    if (icon) {
                        icon.src = 'images/arrow_drop_down.svg';
                        icon.alt = 'ドロップダウンアイコン';
                    }
                }
            }
            
            // ドロップダウンを閉じるヘルパー関数
            function closeDropdown(wrapper) {
                const button = wrapper.querySelector('.dropdown-toggle');
                const contentElement = wrapper.querySelector('.dropdown-content');
                const icon = wrapper.querySelector('.button-icon');

                if (button.getAttribute('aria-expanded') === 'true') {
                    contentElement.classList.remove('show');
                    wrapper.classList.remove('active'); 
                    button.setAttribute('aria-expanded', 'false');

                    // アイコンを右矢印アイコンに戻す
                    if (icon) {
                        icon.src = 'images/arrow_right.svg';
                        icon.alt = '矢印アイコン';
                    }
                }
            }

            // 全てのボタンにイベントリスナーを設定
            toggleButtons.forEach(button => {
                button.addEventListener('click', function() {
                    toggleDropdown(this);
                });
            });
        });
    </script>
</body>
</html>